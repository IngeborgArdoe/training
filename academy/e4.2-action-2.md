#



## Rule: Set location-based value when Company is set
We've briefly mentioned that "rules" are actions triggered by data-related events, such as the creation of a new Concern or the alteration of a specific property value, and can be set globally. Rules can also be defined locally within a module. We now want to define a rule that auto-fills the "Property" value in cases where the Company value is set.

1. In order to do this, navigate to Data Sources or Data Diagram in the "Data Structure"-section. Mark the Concern data source and note the lowermost Property for the data source "Rules".
2. Click the "...", and "Add...". The Action editor you see now is slightly different from the one you've seen in the rest of the Web Module, but the same as for global rules and actions.
3. Click the "General"-tab and rename the rule to something appropriate such as "Set Property when Company is changed". When choosing the "Event", consider if you want the change to be a part of the initial change, or happen after. In this case, we would like the change to happen at the same time the changes to Company is persisted, so we do not choose "on After Modify". Instead, we choose "On After Validate". This only runs the rule if the chosen fields have been considered valid, and does not wait for the "save"-action to request the persisting in the database.
4. In the Data Sources Tab, select "Subscriber Company" to be the only Property that can trigger this rule. This avoids unnecessary triggering. As we only want to change the exact concern we're running the rule for, and based on a value we√¶ve already set for the Concern, to other data sources are needed.
5. In Action Flow, add a Scope from the "Blocs"-section, but un-check the Commit. This is because we've set this rule to run "On After Validate", which may very well be before a user requests to save the Concern. We do not want to save the user's changes unexpectantly by doing it wihtin a rule they're not aware is running.
6. Add a "Modify Object(s)"-effect. Modify the "Current Object". You may note that the "Original Object" has a (N/A)-suffix. This is because your rule is not triggered after an object has been saved, so there's no recognized object from "before". In the Property field - set the new value to Current Object.Subscriber Company.Property.

Saving and exiting, your new rule is in place - you've already defined the action trigger by choosing Event and Property for the rule to trigger on.



## Global Action
Use the "Agreement - Change State"
